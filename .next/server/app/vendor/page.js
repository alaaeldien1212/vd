(()=>{var e={};e.id=341,e.ids=[341],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8610:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c}),t(6474),t(2222),t(5866);var r=t(3191),a=t(8716),l=t(7922),i=t.n(l),n=t(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=["",{children:["vendor",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6474)),"/Users/staynza/Desktop/Vnd/app/vendor/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2222)),"/Users/staynza/Desktop/Vnd/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/staynza/Desktop/Vnd/app/vendor/page.tsx"],x="/vendor/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/vendor/page",pathname:"/vendor",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9619:(e,s,t)=>{Promise.resolve().then(t.bind(t,8652))},8537:(e,s,t)=>{Promise.resolve().then(t.bind(t,7553))},5296:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2994,23)),Promise.resolve().then(t.t.bind(t,6114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,9671,23)),Promise.resolve().then(t.t.bind(t,1868,23)),Promise.resolve().then(t.t.bind(t,4759,23))},8652:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var r=t(326),a=t(7577),l=t(5442),i=t(4659),n=t(8998),d=t(7202),c=t(6283),o=t(9734),x=t(7358),m=t(3685);function p(){let[e,s]=(0,a.useState)([]),[t,p]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),[g,y]=(0,a.useState)(null),[j,b]=(0,a.useState)(!1),f=async()=>{try{let{data:e,error:t}=await l.O.from("milestone_progress").select("*").not("po_number","is",null),{data:r,error:a}=await l.O.from("purchase_orders").select(`
          id,
          po_number,
          title,
          total_amount,
          currency,
          status,
          issue_date,
          expected_delivery_date,
          projects!inner(name)
        `);if(t)throw t;if(a)throw a;s(e||[]),p(r?.map(e=>({...e,project_name:e.projects?.name}))||[])}catch(e){console.error("Error fetching vendor data:",e)}finally{u(!1)}},N=async(e,s)=>{try{let{error:t}=await l.O.from("milestones").update({completion_percentage:s,status:100===s?"completed":"in_progress"}).eq("id",e);if(t)throw t;f()}catch(e){console.error("Error updating milestone:",e)}},v=e=>{switch(e){case"completed":return r.jsx(i.Z,{className:"h-5 w-5 text-green-500"});case"approved":return r.jsx(i.Z,{className:"h-5 w-5 text-green-600"});case"in_progress":return r.jsx(n.Z,{className:"h-5 w-5 text-blue-500"});case"overdue":return r.jsx(d.Z,{className:"h-5 w-5 text-red-500"});default:return r.jsx(n.Z,{className:"h-5 w-5 text-gray-400"})}},w=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"approved":return"bg-emerald-100 text-emerald-800";case"in_progress":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return h?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"flex justify-between items-center py-6",children:(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vendor Portal"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your milestones and purchase orders"})]})})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-blue-500",children:r.jsx(c.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Purchase Orders"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-green-500",children:r.jsx(i.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed Milestones"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"completed"===e.status).length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-yellow-500",children:r.jsx(n.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"in_progress"===e.status).length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-red-500",children:r.jsx(d.Z,{className:"h-6 w-6 text-white"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>e.is_overdue).length})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Purchase Orders"})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Number"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.po_number}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.project_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.title}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.currency," ",(e.total_amount/1e3).toFixed(0),"K"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"issued"===e.status?"bg-blue-100 text-blue-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.status.replace("_"," ").toUpperCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.expected_delivery_date&&new Date(e.expected_delivery_date).toLocaleDateString()})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Milestones"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:e.map(e=>r.jsx("div",{className:"p-6 hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[v(e.status),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(e.status)}`,children:e.status.replace("_"," ").toUpperCase()}),e.is_overdue&&r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"OVERDUE"})]}),e.description&&r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(o.Z,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:e.project_name})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(c.Z,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:e.po_number})]}),e.due_date&&(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(x.Z,{className:"h-4 w-4 mr-1"}),(0,r.jsxs)("span",{children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]})]})]}),(0,r.jsxs)("div",{className:"ml-6 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"text-right mb-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500 mb-1",children:[e.completion_percentage,"% Complete"]}),r.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.completion_percentage}%`}})}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Weight: ",e.weight_percentage,"%"]})]}),"completed"!==e.status&&"approved"!==e.status&&(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("input",{type:"range",min:"0",max:"100",value:e.completion_percentage,onChange:s=>N(e.id,parseInt(s.target.value)),className:"w-full"}),(0,r.jsxs)("button",{onClick:()=>{y(e),b(!0)},className:"w-full btn-primary text-sm",children:[r.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Upload Evidence"]})]})]})]})},e.id))})]})]}),j&&g&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Upload Evidence for ",g.name]}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[r.jsx(m.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Drag and drop files here, or click to select"}),r.jsx("input",{type:"file",multiple:!0,className:"mt-4 w-full",accept:".pdf,.jpg,.jpeg,.png,.doc,.docx"})]}),(0,r.jsxs)("div",{className:"mt-4 flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>b(!1),className:"btn-secondary",children:"Cancel"}),r.jsx("button",{onClick:()=>{b(!1)},className:"btn-primary",children:"Upload"})]})]})})})]})}},7553:(e,s,t)=>{"use strict";t.d(s,{default:()=>p});var r=t(326),a=t(434),l=t(5047),i=t(5920),n=t(9734),d=t(4061),c=t(6283),o=t(6464),x=t(8378);let m=[{name:"Dashboard",href:"/",icon:i.Z},{name:"Projects",href:"/projects",icon:n.Z},{name:"Vendor Portal",href:"/vendor",icon:d.Z},{name:"Purchase Orders",href:"/purchase-orders",icon:c.Z},{name:"Analytics",href:"/analytics",icon:o.Z},{name:"Settings",href:"/settings",icon:x.Z}];function p(){let e=(0,l.usePathname)();return(0,r.jsxs)("nav",{className:"bg-white shadow-sm border-r border-gray-200 w-64 min-h-screen",children:[r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"MT"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Milestone Tracker"}),r.jsx("p",{className:"text-xs text-gray-500",children:"SaaS Platform"})]})]})}),r.jsx("div",{className:"px-3 pb-3",children:r.jsx("div",{className:"space-y-1",children:m.map(s=>{let t=e===s.href;return(0,r.jsxs)(a.default,{href:s.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${t?"bg-primary-50 text-primary-700 border-r-2 border-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(s.icon,{className:`mr-3 h-5 w-5 ${t?"text-primary-600":"text-gray-400 group-hover:text-gray-500"}`}),s.name]},s.name)})})})]})}},5442:(e,s,t)=>{"use strict";t.d(s,{O:()=>r});let r=(0,t(7939).eI)("https://gbnmunfdgdnvlzcabyxf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdibm11bmZkZ2Rudmx6Y2FieXhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczOTg5OTIsImV4cCI6MjA3Mjk3NDk5Mn0.dW5qalrprjBpW-A1SjKQ72dU-99JErIawkOuqHnVSBI")},7202:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7358:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4659:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3685:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});let r=(0,t(6557).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},2222:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d,metadata:()=>n});var r=t(9510),a=t(5384),l=t.n(a);t(7272);let i=(0,t(8570).createProxy)(String.raw`/Users/staynza/Desktop/Vnd/components/Navigation.tsx#default`),n={title:"Milestone Tracker - Procurement & Construction SaaS",description:"Centralized milestone tracking for procurement and construction projects"};function d({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:l().className,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[r.jsx(i,{}),r.jsx("div",{className:"flex-1",children:e})]})})})}},6474:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/staynza/Desktop/Vnd/app/vendor/page.tsx#default`)},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[773,939],()=>t(8610));module.exports=r})();