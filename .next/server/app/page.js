(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},2422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(908),s(2222),s(5866);var r=s(3191),a=s(8716),l=s(7922),i=s.n(l),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,908)),"/Users/staynza/Desktop/Vnd/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2222)),"/Users/staynza/Desktop/Vnd/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/staynza/Desktop/Vnd/app/page.tsx"],x="/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6799:(e,t,s)=>{Promise.resolve().then(s.bind(s,8743))},8743:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(326),a=s(7577),l=s(5442),i=s(5663),n=s(6283),o=s(9734),d=s(4659),c=s(7069),x=s(7202),p=s(1821),m=s(4061),u=s(8998);function g(){let[e,t]=(0,a.useState)({totalProjects:0,totalPOs:0,totalMilestones:0,completedMilestones:0,overdueMilestones:0,totalBudget:0,activeVendors:0,completionRate:0}),[s,g]=(0,a.useState)([]),[h,y]=(0,a.useState)(!0),[j,v]=(0,a.useState)(!1),b=async()=>{try{let{data:e,error:s}=await l.O.from("project_overview").select("*");if(s)throw s;let r=e?.length||0,a=e?.reduce((e,t)=>e+(t.total_purchase_orders||0),0)||0,i=e?.reduce((e,t)=>e+(t.total_milestones||0),0)||0,n=e?.reduce((e,t)=>e+(t.completed_percentage||0),0)||0,o=e?.reduce((e,t)=>e+(t.overdue_milestones||0),0)||0,d=e?.reduce((e,t)=>e+(t.budget||0),0)||0,{data:c,error:x}=await l.O.from("vendor_performance").select("vendor_id").gt("total_milestones",0);if(x)throw x;t({totalProjects:r,totalPOs:a,totalMilestones:i,completedMilestones:n,overdueMilestones:o,totalBudget:d,activeVendors:c?.length||0,completionRate:i>0?n/i*100:0}),g(e||[])}catch(e){console.error("Error fetching dashboard data:",e)}finally{y(!1)}},f=({title:e,value:t,icon:s,color:a="blue",subtitle:l})=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 card-hover",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t}),l&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:l})]}),r.jsx("div",{className:`p-3 rounded-full ${{blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500",purple:"bg-purple-500"}[a]}`,children:r.jsx(s,{className:"h-6 w-6 text-white"})})]})});return h?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Milestone Tracker"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Procurement & Construction Management"})]}),r.jsx("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("button",{onClick:()=>v(!0),className:"btn-primary",children:[r.jsx(n.Z,{className:"h-4 w-4 mr-2"}),"New Project"]})})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(f,{title:"Total Projects",value:e.totalProjects,icon:o.Z,color:"blue"}),r.jsx(f,{title:"Purchase Orders",value:e.totalPOs,icon:n.Z,color:"purple"}),r.jsx(f,{title:"Total Milestones",value:e.totalMilestones,icon:d.Z,color:"green"}),r.jsx(f,{title:"Completion Rate",value:`${e.completionRate.toFixed(1)}%`,icon:c.Z,color:"green",subtitle:`${e.completedMilestones} completed`})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx(f,{title:"Overdue Milestones",value:e.overdueMilestones,icon:x.Z,color:"red"}),r.jsx(f,{title:"Total Budget",value:`$${(e.totalBudget/1e6).toFixed(1)}M`,icon:p.Z,color:"blue"}),r.jsx(f,{title:"Active Vendors",value:e.activeVendors,icon:m.Z,color:"purple"}),r.jsx(f,{title:"In Progress",value:e.totalMilestones-e.completedMilestones,icon:u.Z,color:"yellow",subtitle:"milestones"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Projects Overview"})}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Milestones"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overdue"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:e.client_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"planning"===e.status?"bg-yellow-100 text-yellow-800":"active"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-blue-100 text-blue-800":"on_hold"===e.status?"bg-orange-100 text-orange-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.status.replace("_"," ").toUpperCase()})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.completed_percentage}%`}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:[e.completed_percentage.toFixed(1),"%"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.total_milestones}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.overdue_milestones>0?r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:e.overdue_milestones}):r.jsx("span",{className:"text-sm text-gray-500",children:"0"})})]},e.id))})]})})]})]}),r.jsx(i.Z,{isOpen:j,onClose:()=>v(!1),onProjectCreated:()=>{b()}})]})}},7202:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},4659:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7069:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},908:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/staynza/Desktop/Vnd/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[773,939,812],()=>s(2422));module.exports=r})();