(()=>{var e={};e.id=948,e.ids=[948],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},2122:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},3501:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>c}),s(8791),s(2222),s(5866);var r=s(3191),a=s(8716),i=s(7922),l=s.n(i),n=s(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8791)),"/Users/staynza/Desktop/Vnd/app/projects/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2222)),"/Users/staynza/Desktop/Vnd/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/staynza/Desktop/Vnd/app/projects/[id]/page.tsx"],x="/projects/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8611:(e,t,s)=>{Promise.resolve().then(s.bind(s,2256))},8537:(e,t,s)=>{Promise.resolve().then(s.bind(s,7553))},5296:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},2256:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(326),a=s(7577),i=s(5047),l=s(5442),n=s(4019),d=s(6557);let c=(0,d.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),o=(0,d.Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function x({isOpen:e,onClose:t,onMilestoneCreated:s,projectId:i}){let[d,x]=(0,a.useState)({name:"",description:"",due_date:"",weight_percentage:0,evidence_required:!1}),[m,p]=(0,a.useState)([]),[h,u]=(0,a.useState)(""),[g,y]=(0,a.useState)(!1),[j,b]=(0,a.useState)({}),f=e=>{u(e);let t=m.find(t=>t.id===e);t&&x({name:t.name,description:t.description,due_date:"",weight_percentage:t.default_weight_percentage,evidence_required:t.default_evidence_required})},v=(e,t)=>{x(s=>({...s,[e]:t})),j[e]&&b(t=>({...t,[e]:""}))},N=()=>{let e={};return d.name.trim()||(e.name="Milestone name is required"),d.due_date||(e.due_date="Due date is required"),(d.weight_percentage<=0||d.weight_percentage>100)&&(e.weight_percentage="Weight percentage must be between 1 and 100"),b(e),0===Object.keys(e).length},w=async e=>{if(e.preventDefault(),N())try{y(!0);let{data:e,error:r}=await l.O.from("milestones").insert({project_id:i,name:d.name.trim(),description:d.description.trim()||null,due_date:d.due_date,weight_percentage:d.weight_percentage,evidence_required:d.evidence_required,status:"in_progress",completion_percentage:0}).select();if(r)throw r;console.log("Milestone created successfully:",e),console.log("Checking if this is the first milestone for project:",i);let{data:a,error:n}=await l.O.from("milestones").select("id").eq("project_id",i);if(console.log("Existing milestones count:",a?.length),n)console.error("Error checking existing milestones:",n);else if(a&&1===a.length){console.log("This is the first milestone, updating project status to active");let{error:e}=await l.O.from("projects").update({status:"active"}).eq("id",i);e?console.error("Error updating project status:",e):console.log("Project status successfully updated to active")}else console.log("Not the first milestone, skipping status update");s(),t(),x({name:"",description:"",due_date:"",weight_percentage:0,evidence_required:!1}),u("")}catch(e){console.error("Error creating milestone:",e),alert("Failed to create milestone. Please try again.")}finally{y(!1)}};return e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Milestone"}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(n.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("form",{onSubmit:w,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Use Template (Optional)"}),(0,r.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"",children:"Select a template..."}),m.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Milestone Name *"}),r.jsx("input",{type:"text",value:d.name,onChange:e=>v("name",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"Enter milestone name"}),j.name&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[r.jsx(c,{className:"h-4 w-4 mr-1"}),j.name]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:d.description,onChange:e=>v("description",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter milestone description"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),r.jsx("input",{type:"date",value:d.due_date,onChange:e=>v("due_date",e.target.value),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${j.due_date?"border-red-500":"border-gray-300"}`}),j.due_date&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[r.jsx(c,{className:"h-4 w-4 mr-1"}),j.due_date]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight Percentage *"}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("input",{type:"number",min:"1",max:"100",value:d.weight_percentage,onChange:e=>v("weight_percentage",parseInt(e.target.value)||0),className:`w-full px-3 py-2 pr-8 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${j.weight_percentage?"border-red-500":"border-gray-300"}`,placeholder:"0"}),r.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:r.jsx(o,{className:"h-4 w-4 text-gray-400"})})]}),j.weight_percentage&&(0,r.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[r.jsx(c,{className:"h-4 w-4 mr-1"}),j.weight_percentage]})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"evidence_required",checked:d.evidence_required,onChange:e=>v("evidence_required",e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"evidence_required",className:"ml-2 block text-sm text-gray-700",children:"Evidence required for completion"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Creating...":"Create Milestone"})]})]})]})}):null}let m=(0,d.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),p=(0,d.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var h=s(1470),u=s(4659);function g({isOpen:e,onClose:t,milestone:s,onStatusUpdate:i}){let[d,c]=(0,a.useState)([]),[o,x]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[j,b]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1),N=async()=>{if(s)try{y(!0);let{error:e}=await l.O.from("milestones").update({status:"approved",completion_percentage:100}).eq("id",s.id);if(e)throw e;i(s.id,"approved"),t(),alert("Milestone approved successfully!")}catch(e){console.error("Error approving milestone:",e),alert("Failed to approve milestone. Please try again.")}finally{y(!1)}},w=async()=>{if(s){if(!f){v(!0);return}if(!j.trim()){alert("Please provide a reason for rejection");return}try{y(!0);let{error:e}=await l.O.from("milestones").update({status:"rejected",completion_percentage:0,rejection_reason:j.trim()}).eq("id",s.id);if(e)throw e;i(s.id,"rejected"),t(),alert("Milestone rejected. Vendor will need to resubmit.")}catch(e){console.error("Error rejecting milestone:",e),alert("Failed to reject milestone. Please try again.")}finally{y(!1)}}},_=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},k=e=>e.startsWith("image/")?"\uD83D\uDDBC️":e.includes("pdf")?"\uD83D\uDCC4":e.includes("word")||e.includes("document")?"\uD83D\uDCDD":e.includes("excel")||e.includes("spreadsheet")?"\uD83D\uDCCA":"\uD83D\uDCCE";return e&&s?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Milestone Evidence Review"}),r.jsx("p",{className:"text-gray-600 mt-1",children:s.name})]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:r.jsx(n.Z,{className:"h-6 w-6"})})]}),(0,r.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:[r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Milestone Details"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.description}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Due: ",new Date(s.due_date).toLocaleDateString()]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Status"}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full mt-1 ${"pending_completion_review"===s.status?"bg-yellow-100 text-yellow-800":"approved"===s.status?"bg-green-100 text-green-800":"rejected"===s.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:s.status.replace("_"," ")})]})]})}),s.vendor_notes&&(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Vendor Notes"}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-gray-700",children:s.vendor_notes})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-900 mb-4",children:["Evidence Files (",d.length,")"]}),o?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Loading evidence..."})]}):0===d.length?r.jsx("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-gray-600",children:"No evidence files uploaded yet."})}):r.jsx("div",{className:"space-y-3",children:d.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-2xl",children:k(e.file_type)}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:e.file_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[_(e.file_size)," • ",new Date(e.uploaded_at).toLocaleDateString()]}),e.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>{let{data:t}=l.O.storage.from("evidence-files").getPublicUrl(e.file_path);window.open(t.publicUrl,"_blank")},className:"p-2 text-gray-400 hover:text-gray-600",title:"View file",children:r.jsx(m,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>{let{data:t}=l.O.storage.from("evidence-files").getPublicUrl(e.file_path),s=document.createElement("a");s.href=t.publicUrl,s.download=e.file_name,s.click()},className:"p-2 text-gray-400 hover:text-gray-600",title:"Download file",children:r.jsx(p,{className:"h-4 w-4"})})]})]},e.id))})]})]}),f&&(0,r.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-red-50",children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"rejectionReason",className:"block text-sm font-medium text-red-700 mb-2",children:"Reason for Rejection *"}),r.jsx("textarea",{id:"rejectionReason",value:j,onChange:e=>b(e.target.value),placeholder:"Please provide a detailed reason for rejecting this milestone...",className:"w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",rows:3})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{v(!1),b("")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsxs)("button",{onClick:w,disabled:g||!j.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),g?"Processing...":"Confirm Rejection"]})]})]}),"pending_completion_review"===s.status&&!f&&(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[(0,r.jsxs)("button",{onClick:w,disabled:g,className:"px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[r.jsx(h.Z,{className:"h-4 w-4 mr-2"}),g?"Processing...":"Reject"]}),(0,r.jsxs)("button",{onClick:N,disabled:g,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[r.jsx(u.Z,{className:"h-4 w-4 mr-2"}),g?"Processing...":"Approve"]})]})]})}):null}var y=s(4061),j=s(3855),b=s(6283),f=s(7202),v=s(7358);function N(){let e=(0,i.useParams)().id,[t,s]=(0,a.useState)(null),[n,d]=(0,a.useState)([]),[c,o]=(0,a.useState)([]),[m,p]=(0,a.useState)([]),[h,N]=(0,a.useState)(!0),[w,_]=(0,a.useState)("overview"),[k,D]=(0,a.useState)(!1),[C,P]=(0,a.useState)(!1),[S,M]=(0,a.useState)(null),q=async()=>{try{N(!0),console.log("Fetching project data for project:",e);let{data:t,error:r}=await l.O.from("project_overview").select("*").eq("id",e).single();if(r)throw r;console.log("Project data fetched:",t),s(t);let{data:a,error:i}=await l.O.from("milestones").select(`
          id,
          name,
          description,
          due_date,
          status,
          completion_percentage,
          weight_percentage,
          evidence_required,
          vendor_notes,
          rejection_reason,
          milestone_evidence(count)
        `).eq("project_id",e).order("due_date",{ascending:!0});if(i)throw i;let n=a.map(e=>({...e,evidence_count:e.milestone_evidence?.[0]?.count||0}));d(n);let{data:c,error:x}=await l.O.from("project_schedules").select(`
          id,
          schedule_activities(
            id,
            name,
            description,
            activity_type,
            start_date,
            end_date,
            duration_days,
            progress_percentage,
            status
          )
        `).eq("project_id",e);x?(console.warn("No schedule found for project:",x),o([])):o(c?.[0]?.schedule_activities||[]);let{data:m,error:h}=await l.O.from("purchase_orders").select(`
          id,
          po_number,
          title,
          description,
          total_amount,
          currency,
          status,
          issue_date,
          expected_delivery_date,
          created_at,
          organizations!inner(name)
        `).eq("project_id",e).order("created_at",{ascending:!1});if(h)console.warn("No purchase orders found for project:",h),p([]);else{let e=m?.map(e=>({...e,vendor_name:e.organizations?.name||"Unknown Vendor"}))||[];p(e)}}catch(e){console.error("Error fetching project data:",e)}finally{N(!1)}},Z=()=>t?window.location.origin+"/vendor/"+btoa("vendor_"+e+"_"+Date.now()):"",O=async()=>{let e=Z();try{await navigator.clipboard.writeText(e),alert("Vendor URL copied to clipboard!")}catch(e){console.error("Failed to copy URL:",e)}},E=e=>{M(e),P(!0)};return h?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsx("div",{className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.name}),r.jsx("p",{className:"text-gray-600 mt-1",children:t.description})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:O,className:"btn-secondary flex items-center",children:[r.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Copy Vendor URL"]}),(0,r.jsxs)("button",{onClick:()=>D(!0),className:"btn-primary",children:[r.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})]})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"px-6",children:(0,r.jsxs)("nav",{className:"flex space-x-8",children:[r.jsx("button",{onClick:()=>_("overview"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("overview"===w?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Overview"}),(0,r.jsxs)("button",{onClick:()=>_("milestones"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("milestones"===w?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Milestones (",n.length,")"]}),(0,r.jsxs)("button",{onClick:()=>_("schedule"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("schedule"===w?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Schedule (",c.length,")"]}),(0,r.jsxs)("button",{onClick:()=>_("purchase-orders"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("purchase-orders"===w?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["Purchase Orders (",m.length,")"]})]})})}),(0,r.jsxs)("div",{className:"p-6",children:["overview"===w&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx(u.Z,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Progress"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[t.completed_percentage.toFixed(1),"%"]})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx(b.Z,{className:"h-6 w-6 text-green-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Milestones"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_milestones})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx(f.Z,{className:"h-6 w-6 text-yellow-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.overdue_milestones})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx(v.Z,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Duration"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Math.ceil((new Date(t.end_date).getTime()-new Date(t.start_date).getTime())/864e5)," days"]})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Client"}),r.jsx("p",{className:"text-gray-900",children:t.client_name})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Project Manager"}),r.jsx("p",{className:"text-gray-900",children:t.project_manager_name})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Start Date"}),r.jsx("p",{className:"text-gray-900",children:new Date(t.start_date).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"End Date"}),r.jsx("p",{className:"text-gray-900",children:new Date(t.end_date).toLocaleDateString()})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Budget"}),(0,r.jsxs)("p",{className:"text-gray-900",children:[t.currency," ",t.budget.toLocaleString()]})]}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Status"}),r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("planning"===t.status?"bg-yellow-100 text-yellow-800":"active"===t.status?"bg-green-100 text-green-800":"completed"===t.status?"bg-blue-100 text-blue-800":"on_hold"===t.status?"bg-orange-100 text-orange-800":"cancelled"===t.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:t.status})]})]})]})]}),"milestones"===w&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Milestones"}),(0,r.jsxs)("button",{onClick:()=>D(!0),className:"btn-primary",children:[r.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Milestone"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Evidence"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),r.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.due_date).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:e.completion_percentage+"%"}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:[e.completion_percentage,"%"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"approved"===e.status?"bg-green-100 text-green-800":"pending_completion_review"===e.status?"bg-yellow-100 text-yellow-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"started"===e.status?"bg-blue-100 text-blue-800":"overdue"===e.status?"bg-red-100 text-red-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.evidence_count," files"]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[r.jsx("button",{className:"text-primary-600 hover:text-primary-900 mr-3",children:"Edit"}),r.jsx("button",{onClick:()=>E(e),className:"text-gray-600 hover:text-gray-900",children:"View"})]})]},e.id))})]})})})]}),"schedule"===w&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Project Schedule"}),(0,r.jsxs)("button",{className:"btn-primary",children:[r.jsx(j.Z,{className:"h-4 w-4 mr-2"}),"Add Activity"]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"End Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>(0,r.jsxs)("tr",{children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),r.jsx("div",{className:"text-sm text-gray-500",children:e.description})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e.activity_type})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.start_date?new Date(e.start_date).toLocaleDateString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.end_date?new Date(e.end_date).toLocaleDateString():"-"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.duration_days," days"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:r.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:e.progress_percentage+"%"}})}),(0,r.jsxs)("span",{className:"text-sm text-gray-900",children:[e.progress_percentage,"%"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"in_progress"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status})})]},e.id))})]})})})]}),"purchase-orders"===w&&(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Purchase Orders"})}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Number"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Issue Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expected Delivery"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===m.length?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:"No purchase orders found for this project."})}):m.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.po_number})}),(0,r.jsxs)("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),e.description&&r.jsx("div",{className:"text-sm text-gray-500 mt-1",children:e.description})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.vendor_name}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.currency," ",e.total_amount.toLocaleString()]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("draft"===e.status?"bg-gray-100 text-gray-800":"issued"===e.status?"bg-blue-100 text-blue-800":"acknowledged"===e.status?"bg-yellow-100 text-yellow-800":"in_progress"===e.status?"bg-green-100 text-green-800":"completed"===e.status?"bg-green-100 text-green-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status.replace("_"," ")})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.issue_date?new Date(e.issue_date).toLocaleDateString():"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.expected_delivery_date?new Date(e.expected_delivery_date).toLocaleDateString():"-"})]},e.id))})]})})})]})]}),r.jsx(x,{isOpen:k,onClose:()=>D(!1),onMilestoneCreated:()=>{console.log("Milestone created, refreshing project data..."),q()},projectId:e}),r.jsx(g,{isOpen:C,onClose:()=>P(!1),milestone:S,onStatusUpdate:(e,t)=>{d(s=>s.map(s=>s.id===e?{...s,status:t}:s))}})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Project Not Found"}),r.jsx("p",{className:"text-gray-600",children:"The project you're looking for doesn't exist."})]})})}},7553:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var r=s(326),a=s(434),i=s(5047),l=s(5920),n=s(9734),d=s(6283),c=s(6464),o=s(8378);let x=[{name:"Dashboard",href:"/",icon:l.Z},{name:"Projects",href:"/projects",icon:n.Z},{name:"Purchase Orders",href:"/purchase-orders",icon:d.Z},{name:"Analytics",href:"/analytics",icon:c.Z},{name:"Settings",href:"/settings",icon:o.Z}];function m(){let e=(0,i.usePathname)();return(0,r.jsxs)("nav",{className:"bg-white shadow-sm border-r border-gray-200 w-64 min-h-screen",children:[r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-sm",children:"MT"})})}),(0,r.jsxs)("div",{className:"ml-3",children:[r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Milestone Tracker"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Manage your milestones and purchase orders"})]})]})}),r.jsx("div",{className:"px-3 pb-3",children:r.jsx("div",{className:"space-y-1",children:x.map(t=>{let s=e===t.href;return(0,r.jsxs)(a.default,{href:t.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 ${s?"bg-primary-50 text-primary-700 border-r-2 border-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[r.jsx(t.icon,{className:`mr-3 h-5 w-5 ${s?"text-primary-600":"text-gray-400 group-hover:text-gray-500"}`}),t.name]},t.name)})})})]})}},5442:(e,t,s)=>{"use strict";s.d(t,{O:()=>r});let r=(0,s(7939).eI)("https://gbnmunfdgdnvlzcabyxf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdibm11bmZkZ2Rudmx6Y2FieXhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczOTg5OTIsImV4cCI6MjA3Mjk3NDk5Mn0.dW5qalrprjBpW-A1SjKQ72dU-99JErIawkOuqHnVSBI")},7202:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},7358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},4659:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1470:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},4019:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(6557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2222:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>n});var r=s(9510),a=s(5384),i=s.n(a);s(7272);let l=(0,s(8570).createProxy)(String.raw`/Users/staynza/Desktop/Vnd/components/Navigation.tsx#default`),n={title:"Milestone Tracker - Procurement & Construction SaaS",description:"Centralized milestone tracking for procurement and construction projects"};function d({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[r.jsx(l,{}),r.jsx("div",{className:"flex-1",children:e})]})})})}},8791:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/staynza/Desktop/Vnd/app/projects/[id]/page.tsx#default`)},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[49,939],()=>s(3501));module.exports=r})();