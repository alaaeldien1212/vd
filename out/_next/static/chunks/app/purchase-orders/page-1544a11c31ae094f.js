(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[284],{1910:function(e,t,r){Promise.resolve().then(r.bind(r,8612))},8612:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var a=r(7437),s=r(2265),n=r(2141),l=r(9397),c=r(3247);function d(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!0),[i,o]=(0,s.useState)(""),[x,u]=(0,s.useState)("all");(0,s.useEffect)(()=>{p()},[]);let p=async()=>{try{let{data:e,error:r}=await n.O.from("purchase_orders").select("\n          id,\n          po_number,\n          total_amount,\n          currency,\n          status,\n          created_at,\n          due_date,\n          projects!inner(name),\n          organizations!inner(name)\n        ").order("created_at",{ascending:!1});if(r)throw r;let a=(null==e?void 0:e.map(e=>{var t,r;return{id:e.id,po_number:e.po_number,project_name:(null===(t=e.projects)||void 0===t?void 0:t.name)||"Unknown Project",vendor_name:(null===(r=e.organizations)||void 0===r?void 0:r.name)||"Unknown Vendor",total_amount:e.total_amount,currency:e.currency,status:e.status,created_at:e.created_at,due_date:e.due_date}}))||[];t(a)}catch(e){console.error("Error fetching purchase orders:",e)}finally{d(!1)}},m=e.filter(e=>{let t=e.po_number.toLowerCase().includes(i.toLowerCase())||e.project_name.toLowerCase().includes(i.toLowerCase())||e.vendor_name.toLowerCase().includes(i.toLowerCase()),r="all"===x||e.status===x;return t&&r}),h=e=>{switch(e){case"draft":default:return"bg-gray-100 text-gray-800";case"pending_approval":return"bg-yellow-100 text-yellow-800";case"approved":case"fully_received":return"bg-green-100 text-green-800";case"sent":return"bg-blue-100 text-blue-800";case"acknowledged":return"bg-purple-100 text-purple-800";case"partially_received":return"bg-orange-100 text-orange-800";case"cancelled":return"bg-red-100 text-red-800"}},y=(e,t)=>new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e);return r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Purchase Orders"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage procurement and purchase orders"})]}),(0,a.jsxs)("button",{className:"btn-primary",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"New Purchase Order"]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search purchase orders...",value:i,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,a.jsx)("div",{className:"sm:w-48",children:(0,a.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"pending_approval",children:"Pending Approval"}),(0,a.jsx)("option",{value:"approved",children:"Approved"}),(0,a.jsx)("option",{value:"sent",children:"Sent"}),(0,a.jsx)("option",{value:"acknowledged",children:"Acknowledged"}),(0,a.jsx)("option",{value:"partially_received",children:"Partially Received"}),(0,a.jsx)("option",{value:"fully_received",children:"Fully Received"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Number"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.po_number})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.project_name})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.vendor_name})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:y(e.total_amount,e.currency)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(h(e.status)),children:e.status.replace("_"," ").toUpperCase()})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.due_date?new Date(e.due_date).toLocaleDateString():"N/A"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{className:"text-primary-600 hover:text-primary-900 mr-3",children:"View"}),(0,a.jsx)("button",{className:"text-gray-600 hover:text-gray-900",children:"Edit"})]})]},e.id))})]})})}),0===m.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-500 text-lg",children:"No purchase orders found"}),(0,a.jsx)("p",{className:"text-gray-400 mt-2",children:"Try adjusting your search or filter criteria"})]})]})]})}},2141:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(8439).eI)("https://gbnmunfdgdnvlzcabyxf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdibm11bmZkZ2Rudmx6Y2FieXhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczOTg5OTIsImV4cCI6MjA3Mjk3NDk5Mn0.dW5qalrprjBpW-A1SjKQ72dU-99JErIawkOuqHnVSBI")},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[56,971,117,744],function(){return e(e.s=1910)}),_N_E=e.O()}]);