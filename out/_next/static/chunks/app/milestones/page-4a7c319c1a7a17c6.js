(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{8384:function(e,s,r){Promise.resolve().then(r.bind(r,5943))},5943:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return x}});var t=r(7437),a=r(2265),n=r(2141),l=r(1671),c=r(1723),i=r(6865);let d=(0,r(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var o=r(3247),u=r(8420),m=r(8736),h=r(1047);function x(){let[e,s]=(0,a.useState)([]),[r,x]=(0,a.useState)(!0),[p,g]=(0,a.useState)(""),[y,j]=(0,a.useState)("all"),[f,v]=(0,a.useState)("all");(0,a.useEffect)(()=>{b()},[]);let b=async()=>{try{let{data:e,error:r}=await n.O.from("milestone_progress").select("*").order("due_date",{ascending:!0});if(r)throw r;s(e||[])}catch(e){console.error("Error fetching milestones:",e)}finally{x(!1)}},N=e.filter(e=>{let s=e.name.toLowerCase().includes(p.toLowerCase())||e.project_name.toLowerCase().includes(p.toLowerCase())||e.vendor_name&&e.vendor_name.toLowerCase().includes(p.toLowerCase()),r="all"===y||e.status===y,t="all"===f||e.project_name===f;return s&&r&&t}),w=e=>{switch(e){case"completed":return(0,t.jsx)(l.Z,{className:"h-5 w-5 text-green-500"});case"approved":return(0,t.jsx)(l.Z,{className:"h-5 w-5 text-green-600"});case"in_progress":return(0,t.jsx)(c.Z,{className:"h-5 w-5 text-blue-500"});case"overdue":return(0,t.jsx)(i.Z,{className:"h-5 w-5 text-red-500"});case"rejected":return(0,t.jsx)(d,{className:"h-5 w-5 text-red-500"});default:return(0,t.jsx)(c.Z,{className:"h-5 w-5 text-gray-400"})}},k=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"approved":return"bg-emerald-100 text-emerald-800";case"in_progress":return"bg-blue-100 text-blue-800";case"overdue":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Z=Array.from(new Set(e.map(e=>e.project_name)));return r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Milestones"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Track progress across all project milestones"})]})})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search milestones...",value:p,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"approved",children:"Approved"}),(0,t.jsx)("option",{value:"rejected",children:"Rejected"}),(0,t.jsx)("option",{value:"overdue",children:"Overdue"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("select",{value:f,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Projects"}),Z.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Milestones (",N.length,")"]})}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:N.map(e=>(0,t.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[w(e.status),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(k(e.status)),children:e.status.replace("_"," ").toUpperCase()}),e.is_overdue&&(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"OVERDUE"})]}),e.description&&(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("span",{children:e.project_name})]}),e.po_number&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("span",{children:e.po_number})]}),e.vendor_name&&(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsxs)("span",{children:["Vendor: ",e.vendor_name]})}),e.due_date&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),(0,t.jsxs)("span",{children:["Due: ",new Date(e.due_date).toLocaleDateString()]})]})]})]}),(0,t.jsx)("div",{className:"ml-6 flex-shrink-0",children:(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500 mb-1",children:[e.completion_percentage,"% Complete"]}),(0,t.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(e.completion_percentage,"%")}})}),(0,t.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Weight: ",e.weight_percentage,"%"]})]})})]})},e.id))})]}),0===N.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-gray-500 text-lg",children:"No milestones found"}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:"Try adjusting your search or filter criteria"})]})]})]})}},2141:function(e,s,r){"use strict";r.d(s,{O:function(){return t}});let t=(0,r(8439).eI)("https://gbnmunfdgdnvlzcabyxf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdibm11bmZkZ2Rudmx6Y2FieXhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczOTg5OTIsImV4cCI6MjA3Mjk3NDk5Mn0.dW5qalrprjBpW-A1SjKQ72dU-99JErIawkOuqHnVSBI")},8420:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},1047:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1671:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},8736:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},3247:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6865:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},function(e){e.O(0,[56,971,117,744],function(){return e(e.s=8384)}),_N_E=e.O()}]);