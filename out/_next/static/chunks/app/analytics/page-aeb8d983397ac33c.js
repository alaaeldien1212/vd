(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{1916:function(e,t,s){Promise.resolve().then(s.bind(s,6767))},6767:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),r=s(2265),l=s(2141),n=s(6215),d=s(5252),i=s(525),c=s(6865),m=s(1671);function o(){let[e,t]=(0,r.useState)({totalProjects:0,totalBudget:0,completionRate:0,overdueMilestones:0,activeVendors:0,monthlyData:[]}),[s,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{x()},[]);let x=async()=>{try{let{data:e,error:s}=await l.O.from("project_overview").select("*");if(s)throw s;let a=(null==e?void 0:e.length)||0,r=(null==e?void 0:e.reduce((e,t)=>e+(t.budget||0),0))||0,n=(null==e?void 0:e.reduce((e,t)=>e+(t.total_milestones||0),0))||0,d=(null==e?void 0:e.reduce((e,t)=>e+(t.completed_percentage||0),0))||0,i=(null==e?void 0:e.reduce((e,t)=>e+(t.overdue_milestones||0),0))||0,{data:c,error:m}=await l.O.from("vendor_performance").select("vendor_id").gt("total_milestones",0);if(m)throw m;let o=h(e||[]);t({totalProjects:a,totalBudget:r,completionRate:n>0?d/n*100:0,overdueMilestones:i,activeVendors:(null==c?void 0:c.length)||0,monthlyData:o})}catch(e){console.error("Error fetching analytics data:",e)}finally{o(!1)}},h=e=>{let t=[],s=new Date;for(let a=5;a>=0;a--){let r=new Date(s.getFullYear(),s.getMonth()-a,1),l=r.toLocaleDateString("en-US",{month:"short",year:"numeric"}),n=e.filter(e=>{let t=new Date(e.created_at);return t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()});t.push({month:l,projects:n.length,budget:n.reduce((e,t)=>e+(t.budget||0),0)})}return t},u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center py-6",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Project performance and insights"})]})})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(n.Z,{className:"h-8 w-8 text-primary-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Projects"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalProjects})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(d.Z,{className:"h-8 w-8 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Budget"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:u(e.totalBudget)})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(i.Z,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Completion Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[e.completionRate.toFixed(1),"%"]})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(c.Z,{className:"h-8 w-8 text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Overdue Milestones"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.overdueMilestones})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Projects Created by Month"}),(0,a.jsx)("div",{className:"space-y-4",children:e.monthlyData.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t.month}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:"".concat(t.projects/Math.max(...e.monthlyData.map(e=>e.projects))*100,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 w-8",children:t.projects})]})]},s))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Budget Distribution"}),(0,a.jsx)("div",{className:"space-y-4",children:e.monthlyData.map((t,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t.month}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(t.budget/Math.max(...e.monthlyData.map(e=>e.budget),1)*100,"%")}})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900 w-20 text-right",children:u(t.budget)})]})]},s))})]})]}),(0,a.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Vendor Performance"}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(m.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"Vendor performance data will be available soon"})]})]})]})]})}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(8439).eI)("https://gbnmunfdgdnvlzcabyxf.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdibm11bmZkZ2Rudmx6Y2FieXhmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczOTg5OTIsImV4cCI6MjA3Mjk3NDk5Mn0.dW5qalrprjBpW-A1SjKQ72dU-99JErIawkOuqHnVSBI")},6215:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5252:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},6865:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])}},function(e){e.O(0,[56,971,117,744],function(){return e(e.s=1916)}),_N_E=e.O()}]);